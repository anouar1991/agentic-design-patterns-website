{
  "name": "Sub-PRD: T-600 - Production build verified: platform builds, deploys, and delivers incredible learning experience",
  "description": "Sub-PRD breaking down T-600 into manageable tasks ensuring the platform builds cleanly, all features work in production mode, bundle size is reasonable, and the full learning experience is delivered",
  "parentTaskId": "T-600",
  "parentPrdFile": "prd.json",
  "parentGuarantees": [
    "Production build succeeds with no errors",
    "All features work in production build",
    "Bundle size is reasonable",
    "Platform is ready for deployment",
    "User can experience the full incredible learning platform"
  ],
  "tasks": [
    {
      "id": "T-600-100",
      "name": "Production build compiles with zero errors",
      "intent": "Establish that the codebase compiles cleanly for production, which is the foundation for everything else",
      "description": "Run the production build command and fix any TypeScript, import, or compilation errors until the build succeeds with exit code 0",
      "pass": true,
      "dependencies": [],
      "complexity": 2,
      "requires": [
        "Performance optimized",
        "SEO tags added"
      ],
      "guarantees": [
        "npm run build exits with code 0",
        "No TypeScript errors in build output",
        "Build output directory (dist or build) is created"
      ],
      "validation": "npm run build && echo 'BUILD SUCCESS'",
      "actions": [
        "Run npm run build and capture output",
        "Fix any TypeScript compilation errors",
        "Fix any missing import or module resolution errors",
        "Fix any ESLint errors that block build",
        "Re-run build until it succeeds cleanly"
      ]
    },
    {
      "id": "T-600-200",
      "name": "Build output has no warnings that indicate runtime issues",
      "intent": "Ensure build warnings don't mask issues that would break features in production",
      "description": "Review build warnings for issues like missing dependencies, circular imports, or large chunks that could cause runtime failures. Fix critical warnings.",
      "pass": true,
      "dependencies": [
        "T-600-100"
      ],
      "complexity": 2,
      "requires": [
        "npm run build exits with code 0"
      ],
      "guarantees": [
        "No critical build warnings remain",
        "No missing dependency warnings",
        "No circular dependency warnings that could cause undefined imports"
      ],
      "validation": "npm run build 2>&1 | grep -iE 'warning|warn' | head -20",
      "actions": [
        "Run build and capture all warnings",
        "Categorize warnings as critical vs cosmetic",
        "Fix any missing dependency or circular import warnings",
        "Verify no warnings indicate potential runtime failures"
      ]
    },
    {
      "id": "T-600-300",
      "name": "Bundle size is reasonable for a learning platform",
      "intent": "Ensure the bundle doesn't exceed reasonable limits that would hurt load times and user experience",
      "description": "Analyze the production bundle size, verify code splitting is working, and ensure total initial load is under reasonable thresholds (main JS under 500KB gzipped)",
      "pass": true,
      "dependencies": [
        "T-600-100"
      ],
      "complexity": 2,
      "requires": [
        "npm run build exits with code 0"
      ],
      "guarantees": [
        "Total initial JS bundle under 500KB gzipped",
        "Code splitting produces multiple chunks",
        "No single chunk exceeds 300KB gzipped"
      ],
      "validation": "npm run build && ls -lah dist/assets/*.js 2>/dev/null || ls -lah build/static/js/*.js 2>/dev/null",
      "actions": [
        "Run production build",
        "Measure total JS bundle size",
        "Verify code splitting created multiple chunks",
        "Check if any single chunk is unreasonably large",
        "Optimize if thresholds are exceeded"
      ]
    },
    {
      "id": "T-600-400",
      "name": "Production build serves and renders all routes",
      "intent": "Verify the built assets actually work when served, not just that they compile",
      "description": "Serve the production build locally and verify all chapter routes render correctly without JavaScript errors",
      "pass": false,
      "dependencies": [
        "T-600-100"
      ],
      "complexity": 3,
      "requires": [
        "npm run build exits with code 0"
      ],
      "guarantees": [
        "Home page renders in production build",
        "All chapter routes are accessible",
        "No JavaScript console errors on page load",
        "Navigation between chapters works"
      ],
      "validation": "npx serve -s dist -l 4173 & sleep 2 && curl -s http://localhost:4173 | grep -q '<div id' && echo 'SERVES OK' ; kill %1 2>/dev/null",
      "actions": [
        "Serve production build with a static file server",
        "Open home page and verify it renders",
        "Navigate to each chapter route",
        "Check browser console for JavaScript errors",
        "Verify client-side routing works (no 404s on direct URL access)",
        "Stop the server"
      ]
    },
    {
      "id": "T-600-500",
      "name": "Interactive features work in production build",
      "intent": "Confirm that all interactive learning features survive the production build minification and optimization",
      "description": "Test interactive diagrams, code highlighting, clickable terms, quizzes, and navigation in the production build to ensure minification hasn't broken functionality",
      "pass": false,
      "dependencies": [
        "T-600-400"
      ],
      "complexity": 3,
      "requires": [
        "All chapter routes are accessible",
        "No JavaScript console errors on page load"
      ],
      "guarantees": [
        "Interactive diagrams render and respond to clicks",
        "Code blocks display with syntax highlighting",
        "Dark/light theme toggle works",
        "Quiz interactions function correctly",
        "Clickable code terms open modals"
      ],
      "validation": "Serve production build and use browser to test interactive features on at least 2 chapters",
      "actions": [
        "Serve production build",
        "Test interactive diagram on Chapter 1 (click nodes, view details)",
        "Test code block syntax highlighting and clickable terms",
        "Test dark/light theme toggle",
        "Test quiz functionality",
        "Test responsive layout at mobile and desktop sizes"
      ]
    },
    {
      "id": "T-600-600",
      "name": "SEO and meta tags present in production build",
      "intent": "Verify SEO optimizations from T-520 survive the build process and are present in served HTML",
      "description": "Check that dynamic titles, Open Graph tags, structured data, and meta descriptions are present in the production build output",
      "pass": false,
      "dependencies": [
        "T-600-400"
      ],
      "complexity": 1,
      "requires": [
        "All chapter routes are accessible"
      ],
      "guarantees": [
        "HTML includes meta description tags",
        "Open Graph tags are present",
        "Page titles are set correctly",
        "Structured data (JSON-LD) is present if implemented"
      ],
      "validation": "curl -s http://localhost:4173 | grep -E '<meta|<title|og:' | head -10",
      "actions": [
        "Serve production build",
        "Inspect HTML source for meta tags",
        "Check Open Graph tags presence",
        "Verify page title is set",
        "Check for structured data script tags"
      ]
    },
    {
      "id": "T-600-700",
      "name": "Performance optimizations verified in production build",
      "intent": "Confirm that T-510 performance optimizations (code splitting, lazy loading) are active in the production build",
      "description": "Verify that code splitting produces separate chunks, lazy-loaded components load on demand, and PrismLight (or equivalent) is used instead of full Prism",
      "pass": false,
      "dependencies": [
        "T-600-300"
      ],
      "complexity": 2,
      "requires": [
        "Code splitting produces multiple chunks"
      ],
      "guarantees": [
        "Lazy-loaded routes produce separate chunks",
        "Initial page load doesn't download all chapter code at once",
        "Syntax highlighting uses optimized bundle"
      ],
      "validation": "ls dist/assets/*.js | wc -l && echo 'chunks created'",
      "actions": [
        "Inspect build output for chunk files",
        "Verify lazy-loaded routes have separate chunks",
        "Check network tab to confirm on-demand loading",
        "Verify PrismLight or optimized syntax highlighter is bundled"
      ]
    },
    {
      "id": "T-600-800",
      "name": "All parent guarantees verified: platform is production-ready",
      "intent": "Final verification that all parent task guarantees are satisfied and the platform delivers an incredible learning experience",
      "description": "Comprehensive verification task that checks every parent guarantee: build succeeds, all features work, bundle size is reasonable, platform is deployment-ready, and the full learning experience is delivered",
      "pass": false,
      "dependencies": [
        "T-600-100",
        "T-600-200",
        "T-600-300",
        "T-600-400",
        "T-600-500",
        "T-600-600",
        "T-600-700"
      ],
      "complexity": 2,
      "requires": [
        "npm run build exits with code 0",
        "No critical build warnings remain",
        "Total initial JS bundle under 500KB gzipped",
        "All chapter routes are accessible",
        "Interactive diagrams render and respond to clicks",
        "HTML includes meta description tags",
        "Lazy-loaded routes produce separate chunks"
      ],
      "guarantees": [
        "Production build succeeds with no errors",
        "All features work in production build",
        "Bundle size is reasonable",
        "Platform is ready for deployment",
        "User can experience the full incredible learning platform"
      ],
      "validation": "npm run build && echo '--- Build OK ---' && ls -lah dist/assets/*.js | head -10 && echo '--- Bundle OK ---' && echo 'ALL T-600 GUARANTEES SATISFIED'",
      "actions": [
        "Run clean production build and verify exit code 0",
        "Verify bundle sizes are within thresholds",
        "Serve build and verify home page + all chapters render",
        "Verify interactive features work (diagrams, code terms, quizzes)",
        "Verify SEO tags are present",
        "Verify code splitting and lazy loading are active",
        "Document final build stats and confirm all parent guarantees are met"
      ]
    }
  ],
  "ralph": {
    "currentTaskId": null,
    "recommendedNextStepId": "T-600-400",
    "history": ["T-600-100", "T-600-200", "T-600-300"]
  }
}
