@import "tailwindcss";

/* Font-face declarations with font-display: swap to prevent FOIT (Flash of Invisible Text).
   These predefine the font families so text renders with system fallback immediately,
   then swaps to the web font when loaded. Google Fonts CSS provides the actual src URLs. */
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 400 800;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa1ZL7.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 400 500;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/jetbrainsmono/v24/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPxDcwg.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@theme {
  /* Brand Colors - Refined AI/Neural Network palette with warmer undertones */
  --color-primary-50: #eff8ff;
  --color-primary-100: #dbeefe;
  --color-primary-200: #bfdbfe;
  --color-primary-300: #7cc2fc;
  --color-primary-400: #3aadfa;
  --color-primary-500: #0d96e6;
  --color-primary-600: #0278c7;
  --color-primary-700: #0361a3;
  --color-primary-800: #065386;
  --color-primary-900: #0b436e;

  /* Accent - Refined Violet/Purple for premium AI feel */
  --color-accent-50: #fbf6ff;
  --color-accent-100: #f4eaff;
  --color-accent-200: #ebd8ff;
  --color-accent-300: #dbb6fe;
  --color-accent-400: #c48afc;
  --color-accent-500: #ab5cf7;
  --color-accent-600: #9536ea;
  --color-accent-700: #8024ce;
  --color-accent-800: #6c22a8;
  --color-accent-900: #5a1d87;

  /* Success/Green - Slightly warmer */
  --color-success-400: #4ade80;
  --color-success-500: #22c55e;
  --color-success-600: #16a34a;

  /* Warning/Amber - Richer */
  --color-warning-400: #fbbf24;
  --color-warning-500: #f59e0b;
  --color-warning-600: #d97706;

  /* Error/Red - Softer */
  --color-error-400: #f87171;
  --color-error-500: #ef4444;
  --color-error-600: #dc2626;

  /* Dark theme base - Deeper, richer slate tones */
  --color-dark-50: #f8fafc;
  --color-dark-100: #f0f4f8;
  --color-dark-200: #e1e7ef;
  --color-dark-300: #c5cedb;
  --color-dark-400: #8c9bb5;
  --color-dark-500: #5f7089;
  --color-dark-600: #455268;
  --color-dark-700: #303d52;
  --color-dark-800: #1b2638;
  --color-dark-900: #0d1525;
  --color-dark-950: #050a14;

  /* Spacing scale */
  --spacing-128: 32rem;
  --spacing-144: 36rem;
  --spacing-160: 40rem;

  /* Font families */
  --font-display: "Inter", system-ui, sans-serif;
  --font-mono: "JetBrains Mono", "Fira Code", ui-monospace, monospace;
  --font-arabic: "Noto Sans Arabic", "Amiri", system-ui, sans-serif;

  /* Font size refinements for better hierarchy */
  --font-size-hero: 4.5rem;
  --font-size-hero--line-height: 1.05;
  --font-size-hero--letter-spacing: -0.035em;

  /* Border radius */
  --radius-4xl: 2rem;
  --radius-5xl: 2.5rem;

  /* Transition timing tokens */
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-smooth: cubic-bezier(0.25, 0.1, 0.25, 1);
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
}

/* Base styles */
html {
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Dark theme (default) */
body {
  @apply bg-dark-950 text-dark-100 font-sans antialiased;
  margin: 0;
  line-height: 1.7;
  letter-spacing: -0.01em;
  background-image:
    radial-gradient(ellipse 80% 80% at 50% -20%, rgba(100, 90, 210, 0.12), transparent),
    radial-gradient(ellipse 60% 60% at 100% 100%, rgba(13, 150, 230, 0.08), transparent);
  background-attachment: fixed;
}

/* Smooth theme transition */
html.theme-transition,
html.theme-transition *,
html.theme-transition *::before,
html.theme-transition *::after {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease,
              box-shadow 0.3s ease, fill 0.3s ease, stroke 0.3s ease !important;
  transition-delay: 0s !important;
}

/* Light theme */
html.light body {
  @apply bg-gray-50 text-gray-900;
  background-image:
    radial-gradient(ellipse 80% 80% at 50% -20%, rgba(13, 150, 230, 0.07), transparent),
    radial-gradient(ellipse 60% 60% at 100% 100%, rgba(171, 92, 247, 0.04), transparent);
}

/* ============================================
   Light Mode: Override dark-* token colors
   This allows dark-* classes to render correctly in light mode
   without needing to add light: variants to every component.
   ============================================ */
html.light {
  --color-dark-50: #0f172a;
  --color-dark-100: #1e293b;
  --color-dark-200: #334155;
  --color-dark-300: #475569;
  --color-dark-400: #64748b;
  --color-dark-500: #94a3b8;
  --color-dark-600: #cbd5e1;
  --color-dark-700: #e2e8f0;
  --color-dark-800: #f1f5f9;
  --color-dark-900: #f8fafc;
  --color-dark-950: #ffffff;
}

/* ============================================
   Enhanced Typography Scale
   ============================================ */

h1, h2, h3, h4, h5, h6 {
  letter-spacing: -0.025em;
  line-height: 1.2;
  font-feature-settings: "ss01", "ss02", "cv01";
}

h1 { letter-spacing: -0.035em; line-height: 1.1; }
h2 { letter-spacing: -0.03em; line-height: 1.15; }
h3 { letter-spacing: -0.02em; line-height: 1.25; }

p {
  line-height: 1.75;
}

/* ============================================
   Global Transition Defaults
   ============================================ */

/* Smooth transitions on all interactive elements */
a, button, [role="button"] {
  transition: color 0.2s var(--ease-smooth),
              background-color 0.2s var(--ease-smooth),
              border-color 0.2s var(--ease-smooth),
              box-shadow 0.2s var(--ease-smooth),
              transform 0.2s var(--ease-smooth),
              opacity 0.2s var(--ease-smooth);
}

/* Enhanced focus ring for accessibility */
:focus-visible {
  outline: 2px solid var(--color-primary-400);
  outline-offset: 2px;
  border-radius: 4px;
}

/* Light mode utility classes */
html.light .light\:bg-white { background-color: white; }
html.light .light\:bg-white\/80 { background-color: rgba(255, 255, 255, 0.8); }
html.light .light\:bg-gray-50 { background-color: rgb(249 250 251); }
html.light .light\:bg-gray-100 { background-color: rgb(243 244 246); }
html.light .light\:bg-primary-50 { background-color: rgb(240 249 255); }
html.light .light\:text-gray-600 { color: rgb(75 85 99); }
html.light .light\:text-gray-700 { color: rgb(55 65 81); }
html.light .light\:text-gray-900 { color: rgb(17 24 39); }
html.light .light\:text-primary-600 { color: rgb(2 132 199); }
html.light .light\:border-gray-200 { border-color: rgb(229 231 235); }
html.light .light\:hover\:bg-gray-50:hover { background-color: rgb(249 250 251); }
html.light .light\:hover\:bg-gray-100:hover { background-color: rgb(243 244 246); }

/* ============================================
   Light Mode: Override special effect classes
   ============================================ */

/* Glass effect in light mode */
html.light .glass {
  background-color: rgba(255, 255, 255, 0.75);
  border-color: rgba(226, 232, 240, 0.6);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

html.light .glass-elevated {
  background-color: rgba(255, 255, 255, 0.85);
  border-color: rgba(226, 232, 240, 0.5);
  box-shadow: 0 8px 32px -8px rgba(0, 0, 0, 0.08),
              0 0 0 1px rgba(0, 0, 0, 0.03) inset;
}

/* Selection in light mode */
html.light ::selection {
  background-color: rgba(171, 92, 247, 0.2);
  color: inherit;
}

/* Code blocks in light mode - keep dark background for readability */
html.light pre {
  background-color: #1e293b;
  border-color: rgba(51, 65, 85, 0.3);
}

/* Code block glass wrappers stay dark in light mode so syntax colors remain readable */
html.light .glass-code {
  background-color: rgba(30, 41, 59, 0.95) !important;
  border-color: rgba(51, 65, 85, 0.4) !important;
  color: #e2e8f0;
}

html.light .glass-code .text-dark-50 { color: #f1f5f9; }
html.light .glass-code .text-dark-200 { color: #e2e8f0; }
html.light .glass-code .text-dark-300 { color: #cbd5e1; }
html.light .glass-code .text-dark-400 { color: #94a3b8; }
html.light .glass-code .text-dark-500 { color: #64748b; }
html.light .glass-code .text-dark-600 { color: #475569; }
html.light .glass-code .border-dark-700\/60 { border-color: rgba(51, 65, 85, 0.6); }

html.light :not(pre) > code {
  background-color: rgba(241, 245, 249, 0.9);
  color: var(--color-primary-600);
  border-color: rgba(226, 232, 240, 0.5);
}

/* Scrollbar in light mode */
html.light ::-webkit-scrollbar-track {
  background-color: rgba(241, 245, 249, 0.5);
}

html.light ::-webkit-scrollbar-thumb {
  background-color: rgba(148, 163, 184, 0.5);
}

html.light ::-webkit-scrollbar-thumb:hover {
  background-color: rgba(100, 116, 139, 0.7);
}

html.light * {
  scrollbar-color: rgba(148, 163, 184, 0.5) transparent;
}

/* Glow effects - subtler in light mode */
html.light .glow-primary {
  box-shadow: 0 0 15px rgba(13, 150, 230, 0.12), 0 0 45px rgba(13, 150, 230, 0.04);
}

/* Chapter card hover in light mode */
html.light .chapter-card:hover {
  box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.12),
              0 0 0 1px rgba(0, 0, 0, 0.04),
              0 0 20px -5px var(--card-glow);
}

/* Gradient text in light mode - use darker gradient stops */
html.light .gradient-text {
  background-image: linear-gradient(to right, var(--color-primary-600), var(--color-accent-600), var(--color-primary-600));
}

/* Node tooltip in light mode */
html.light .node-tooltip {
  background: rgba(255, 255, 255, 0.95);
  border-color: rgba(226, 232, 240, 0.8);
  box-shadow: 0 8px 24px -4px rgba(0, 0, 0, 0.12);
}

html.light .node-tooltip::after {
  border-top-color: rgba(255, 255, 255, 0.95);
}

/* Pattern backgrounds in light mode */
html.light .pattern-grid {
  background-image:
    linear-gradient(rgba(100, 116, 139, 0.06) 1px, transparent 1px),
    linear-gradient(90deg, rgba(100, 116, 139, 0.06) 1px, transparent 1px);
}

html.light .pattern-dots {
  background-image: radial-gradient(rgba(100, 116, 139, 0.2) 1px, transparent 1px);
}

/* Diagram fullscreen in light mode */
html.light .diagram-fullscreen {
  background: #f8fafc;
}

/* React Flow controls in light mode */
html.light .react-flow__controls {
  background-color: rgba(255, 255, 255, 0.8);
  border-color: #e2e8f0;
}

html.light .react-flow__controls-button {
  background-color: white;
  border-color: #e2e8f0;
  color: #334155;
}

html.light .react-flow__controls-button:hover {
  background-color: #f1f5f9;
}

html.light .react-flow__minimap {
  background-color: rgba(255, 255, 255, 0.8);
  border-color: #e2e8f0;
}

/* Footer in light mode */
html.light footer {
  background-color: rgba(248, 250, 252, 0.9);
  border-color: #e2e8f0;
}

/* Preserve white text in elements that always need it (gradient backgrounds, colored buttons) */
html.light .gradient-text {
  -webkit-text-fill-color: transparent; /* gradient text override */
}

/* Ambient background subtle in light mode */
html.light .ambient-bg {
  opacity: 0.3;
}

/* Custom scrollbar - thinner, subtler */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  @apply bg-dark-900/50;
}

::-webkit-scrollbar-thumb {
  @apply bg-dark-600/70 rounded-full;
  transition: background-color 0.2s;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-dark-500;
}

/* Firefox scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(69, 82, 104, 0.7) transparent;
}

/* Selection */
::selection {
  @apply bg-accent-500/30 text-white;
}

/* Code highlighting overrides - refined with deeper backdrop */
pre {
  @apply rounded-xl bg-dark-900/90 border border-dark-700/30;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

code {
  @apply font-mono text-sm;
  font-variant-ligatures: contextual;
  font-feature-settings: "calt", "liga";
}

/* Inline code in text */
:not(pre) > code {
  @apply rounded-md px-1.5 py-0.5 bg-dark-800/80 text-primary-300 border border-dark-700/30;
  font-size: 0.875em;
}

/* Glow effects - refined with softer spread */
.glow-primary {
  box-shadow: 0 0 15px rgba(13, 150, 230, 0.25), 0 0 45px rgba(13, 150, 230, 0.08);
}

.glow-success {
  box-shadow: 0 0 15px rgba(34, 197, 94, 0.25), 0 0 45px rgba(34, 197, 94, 0.08);
}

/* Glass effect - refined with subtler borders */
.glass {
  @apply bg-dark-800/50 border border-dark-700/40;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

/* Gradient text - refined with smoother color stops */
.gradient-text {
  @apply bg-gradient-to-r from-primary-300 via-accent-400 to-primary-300 bg-clip-text text-transparent;
  background-size: 200% auto;
  animation: gradient-shift 4s var(--ease-smooth) infinite;
}

@keyframes gradient-shift {
  0%, 100% { background-position: 0% center; }
  50% { background-position: 100% center; }
}

/* Node connection lines for React Flow */
.react-flow__edge-path {
  stroke: rgb(100, 116, 139);
  stroke-width: 2;
}

.react-flow__edge-path:hover {
  stroke: rgb(14, 165, 233);
}

/* Pattern backgrounds */
.pattern-grid {
  background-image:
    linear-gradient(rgba(100, 116, 139, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(100, 116, 139, 0.03) 1px, transparent 1px);
  background-size: 50px 50px;
}

.pattern-dots {
  background-image: radial-gradient(rgba(100, 116, 139, 0.15) 1px, transparent 1px);
  background-size: 20px 20px;
}

.text-balance {
  text-wrap: balance;
}

/* Hero Visualization â€” animated agentic pattern nodes */
.hero-viz {
  opacity: 0.22;
}

.hero-node-core {
  animation: hero-fade-in 0.8s var(--ease-smooth) forwards;
  will-change: opacity;
}

.hero-edge {
  animation: hero-edge-in 1s var(--ease-smooth) forwards;
  will-change: opacity;
}

.hero-pulse {
  transform-origin: center;
  animation: hero-ring-pulse 5s ease-in-out infinite;
  will-change: transform, opacity;
}

@keyframes hero-fade-in {
  from { opacity: 0; }
  to { opacity: 0.6; }
}

@keyframes hero-edge-in {
  from { opacity: 0; }
  to { opacity: 0.3; }
}

@keyframes hero-ring-pulse {
  0%, 100% { opacity: 0; transform: scale(1); }
  50% { opacity: 0.25; transform: scale(1.4); }
}

/* Responsive: reduce complexity on mobile */
@media (max-width: 640px) {
  .hero-viz {
    opacity: 0.12;
  }
}

/* Accessibility: no animation for reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  .hero-node-core,
  .hero-edge,
  .hero-pulse {
    opacity: 0.4;
  }
  .hero-viz {
    opacity: 0.08;
  }
}

/* Chapter card hover effects - premium with glow, scale, and shadow */
.chapter-card {
  --card-glow: transparent;
  transition: transform 0.35s var(--ease-spring),
              box-shadow 0.35s var(--ease-smooth),
              border-color 0.3s var(--ease-smooth);
}

.chapter-card:hover {
  transform: translateY(-6px) scale(1.03);
  box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.35),
              0 0 0 1px rgba(255, 255, 255, 0.04),
              0 0 20px -5px var(--card-glow);
  border-color: var(--card-glow);
}

.chapter-card:active {
  transform: translateY(-2px) scale(1.01);
  transition-duration: 0.1s;
}

/* Completed chapter card pulse ring */
.chapter-card-completed {
  animation: completed-pulse 3s var(--ease-smooth) infinite;
}

@keyframes completed-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
  50% { box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1); }
}

/* React Flow customization */
.react-flow__node {
  @apply rounded-xl shadow-lg;
}

.react-flow__handle {
  @apply bg-primary-500;
}

.react-flow__minimap {
  @apply bg-dark-900/80 rounded-lg border border-dark-700;
}

.react-flow__controls {
  @apply bg-dark-800/80 rounded-lg border border-dark-700;
}

.react-flow__controls-button {
  @apply bg-dark-700 border-dark-600 text-dark-200;
}

.react-flow__controls-button:hover {
  @apply bg-dark-600;
}

/* ============================================
   Enhanced Learning Experience Animations
   ============================================ */

/* Subtle pulse for interactive nodes with code links */
@keyframes pulse-subtle {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.95;
    transform: scale(1.01);
  }
}

.animate-pulse-subtle {
  animation: pulse-subtle 3s ease-in-out infinite;
}

/* Glow animation for selected elements */
@keyframes glow {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.7;
  }
}

.animate-glow {
  animation: glow 2s ease-in-out infinite;
}

/* Scale utility for hover states */
.scale-102 {
  transform: scale(1.02);
}

/* Line clamp utilities */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Sparkle animation */
@keyframes sparkle {
  0%, 100% {
    opacity: 0;
    transform: scale(0);
  }
  50% {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-sparkle {
  animation: sparkle 1.5s ease-in-out infinite;
}

/* Code highlight animation */
@keyframes highlight-flash {
  0% {
    background-color: transparent;
  }
  20% {
    background-color: rgba(14, 165, 233, 0.3);
  }
  100% {
    background-color: rgba(14, 165, 233, 0.1);
  }
}

.animate-highlight {
  animation: highlight-flash 1s ease-out forwards;
}

/* Enhanced diagram node hover */
.react-flow__node:hover {
  z-index: 100 !important;
}

/* Node hover tooltip */
.node-tooltip {
  position: absolute;
  bottom: calc(100% + 10px);
  left: 50%;
  transform: translateX(-50%);
  min-width: 180px;
  max-width: 240px;
  padding: 8px 10px;
  background: rgba(13, 21, 37, 0.95);
  border: 1px solid rgba(48, 61, 82, 0.6);
  border-radius: 10px;
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  box-shadow: 0 8px 24px -4px rgba(0, 0, 0, 0.4);
  z-index: 200;
  pointer-events: none;
  animation: tooltip-enter 0.2s var(--ease-out-expo) forwards;
}

.node-tooltip::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-top-color: rgba(13, 21, 37, 0.95);
}

@keyframes tooltip-enter {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* Node click ripple */
.node-ripple {
  position: absolute;
  width: 200px;
  height: 200px;
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(0);
  pointer-events: none;
  will-change: transform, opacity;
  animation: node-ripple-expand 0.5s var(--ease-out-expo) forwards;
}

@keyframes node-ripple-expand {
  from {
    transform: translate(-50%, -50%) scale(0);
    opacity: 0.6;
  }
  to {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0;
  }
}

/* Animated edge flow markers */
@keyframes edge-flow {
  from { stroke-dashoffset: 24; }
  to { stroke-dashoffset: 0; }
}

.react-flow__edge-path.edge-animated {
  stroke-dasharray: 6 6;
  animation: edge-flow 1s linear infinite;
  will-change: stroke-dashoffset;
}

/* Edge flow marker (arrowhead-like dash pulse) */
@keyframes edge-flow-pulse {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}

.react-flow__edge.animated .react-flow__edge-path {
  animation: edge-flow 1.2s linear infinite;
}

/* Full-screen diagram overlay */
.diagram-fullscreen {
  position: fixed;
  inset: 0;
  z-index: 50;
  background: var(--color-dark-950);
}

/* Scrollbar styling for detail panel */
.detail-panel-scroll {
  scrollbar-width: thin;
  scrollbar-color: rgb(71, 85, 105) transparent;
}

.detail-panel-scroll::-webkit-scrollbar {
  width: 6px;
}

.detail-panel-scroll::-webkit-scrollbar-thumb {
  background-color: rgb(71, 85, 105);
  border-radius: 3px;
}

/* ============================================
   Premium Utility Classes
   ============================================ */

/* Elevated glass - slightly more prominent for key cards */
.glass-elevated {
  @apply bg-dark-800/60 border border-dark-700/30;
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  box-shadow: 0 8px 32px -8px rgba(0, 0, 0, 0.3),
              0 0 0 1px rgba(255, 255, 255, 0.03) inset;
}

/* Subtle shimmer effect on hover */
.shimmer-hover {
  position: relative;
  overflow: hidden;
}

.shimmer-hover::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    105deg,
    transparent 40%,
    rgba(255, 255, 255, 0.03) 45%,
    rgba(255, 255, 255, 0.06) 50%,
    rgba(255, 255, 255, 0.03) 55%,
    transparent 60%
  );
  background-size: 200% 100%;
  opacity: 0;
  transition: opacity 0.3s var(--ease-smooth);
}

.shimmer-hover:hover::after {
  opacity: 1;
  animation: shimmer-slide 0.8s var(--ease-out-expo) forwards;
}

@keyframes shimmer-slide {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* ============================================
   RTL (Right-to-Left) Support for Arabic
   ============================================ */

/* Arabic font utility class */
.font-arabic {
  font-family: var(--font-arabic);
}

/* RTL direction styles */
html[dir="rtl"] {
  font-family: var(--font-arabic);
}

html[dir="rtl"] body {
  font-family: var(--font-arabic);
  text-align: right;
}

/* RTL-specific adjustments */
html.rtl .gradient-text {
  background: linear-gradient(to left, var(--color-primary-400), var(--color-accent-400), var(--color-primary-400));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Flip icons that have directional meaning in RTL */
html.rtl .rtl\\:rotate-180 {
  transform: rotate(180deg);
}

html.rtl .rtl\\:flip {
  transform: scaleX(-1);
}

/* Adjust spacing for RTL */
html.rtl .space-x-2 > * + * {
  margin-right: 0.5rem;
  margin-left: 0;
}

html.rtl .space-x-4 > * + * {
  margin-right: 1rem;
  margin-left: 0;
}

/* RTL gap adjustments - Flexbox gap works automatically */

/* Keep code blocks LTR */
html.rtl pre,
html.rtl code,
html.rtl .font-mono {
  direction: ltr;
  text-align: left;
}

/* RTL scrollbar position */
html.rtl ::-webkit-scrollbar {
  direction: rtl;
}

/* RTL chapter card hover */
html.rtl .chapter-card:hover {
  transform: translateY(-4px);
}

/* Print utility - hidden on screen, visible in print */
.print-only {
  display: none;
}

/* ============================================
   Print Styles - Clean study material output
   ============================================ */
@media print {
  /* Page setup */
  @page {
    margin: 12mm 15mm 15mm 15mm;
    size: A4;
  }

  /* Force light colors for print */
  html, html.light, html:not(.light) {
    --color-dark-50: #0f172a;
    --color-dark-100: #1e293b;
    --color-dark-200: #334155;
    --color-dark-300: #475569;
    --color-dark-400: #64748b;
    --color-dark-500: #94a3b8;
    --color-dark-600: #cbd5e1;
    --color-dark-700: #e2e8f0;
    --color-dark-800: #f1f5f9;
    --color-dark-900: #f8fafc;
    --color-dark-950: #ffffff;
  }

  body {
    background: white !important;
    background-image: none !important;
    color: #1e293b !important;
    font-size: 11pt;
    line-height: 1.6;
  }

  /* Orphans & widows - prevent sparse pages */
  body, p, li, dd, dt, blockquote {
    orphans: 3;
    widows: 3;
  }

  /* ---- Hide non-printable elements ---- */

  /* Navigation, progress bar, fixed elements, footer */
  nav:not([aria-label="Breadcrumb"]),
  header,
  .reading-progress-bar,
  [class*="fixed top-"],
  footer,
  [role="contentinfo"] {
    display: none !important;
  }

  /* Interactive elements not useful in print */
  button,
  [role="button"],
  .react-flow__controls,
  .react-flow__minimap,
  .react-flow__background,
  .node-tooltip,
  .node-ripple,
  .diagram-fullscreen,
  .celebration-overlay {
    display: none !important;
  }

  /* Theme/language switchers, mobile menus */
  .theme-switcher,
  .language-switcher,
  [class*="mobile-menu"],
  [class*="hamburger"] {
    display: none !important;
  }

  /* Animations and decorative elements */
  .pattern-dots,
  .pattern-grid,
  .ambient-bg,
  .shimmer-hover::after,
  .animate-sparkle {
    display: none !important;
    animation: none !important;
  }

  /* Kill all animations and transitions */
  *, *::before, *::after {
    animation: none !important;
    transition: none !important;
  }

  /* Remove backdrop filters and glows */
  .glass,
  .glass-elevated,
  pre {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    box-shadow: none !important;
  }

  .glow-primary,
  .glow-success {
    box-shadow: none !important;
  }

  /* ---- Layout adjustments ---- */

  /* Remove fixed/absolute positioning on decorative elements */
  .blur-3xl,
  .blur-2xl,
  .blur-xl {
    display: none !important;
  }

  /* Linearize grid layout - single column for print */
  .grid {
    display: block !important;
  }

  .grid > * {
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Max width containers expand */
  .max-w-7xl,
  .max-w-4xl,
  .max-w-3xl {
    max-width: 100% !important;
  }

  /* ---- Code blocks for print ---- */

  pre {
    background-color: #f8fafc !important;
    border: 1px solid #cbd5e1 !important;
    border-radius: 6px !important;
    padding: 12px 16px !important;
    overflow: visible !important;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
    font-size: 9pt !important;
    line-height: 1.5 !important;
    page-break-inside: auto;
  }

  code {
    color: #1e293b !important;
    font-size: 9pt !important;
  }

  /* Inline code */
  :not(pre) > code {
    background-color: #f1f5f9 !important;
    border: 1px solid #e2e8f0 !important;
    color: #0278c7 !important;
    padding: 1px 4px !important;
  }

  /* Code block container (TutorialCodeBlock) */
  .glass.rounded-xl {
    background-color: white !important;
    border: 1px solid #cbd5e1 !important;
    border-radius: 6px !important;
    overflow: visible !important;
  }

  /* Keep code block headers for language label */
  .glass.rounded-xl > div:first-child {
    border-bottom: 1px solid #e2e8f0 !important;
    background-color: #f8fafc !important;
    padding: 6px 12px !important;
  }

  /* Hide copy button inside code blocks */
  .glass.rounded-xl button,
  .glass.rounded-xl [role="button"] {
    display: none !important;
  }

  /* ---- Page break rules ---- */

  /* Avoid breaking inside small elements */
  h1, h2, h3, h4, h5, h6 {
    break-after: avoid;
    page-break-after: avoid;
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Keep heading with following content */
  h1 + *, h2 + *, h3 + *, h4 + * {
    break-before: avoid;
    page-break-before: avoid;
  }

  /* Small elements: avoid page breaks */
  figure, img, table, blockquote {
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Large containers: allow natural flow */
  section, article, .tutorial-section, .chapter-content {
    break-inside: auto;
    page-break-inside: auto;
  }

  /* ---- Gradient text fix ---- */

  .gradient-text {
    background: none !important;
    -webkit-background-clip: unset !important;
    background-clip: unset !important;
    -webkit-text-fill-color: #0f172a !important;
    color: #0f172a !important;
  }

  /* ---- Print header with chapter title ---- */

  /* Show chapter title as running header via first h1 */
  h1 {
    font-size: 20pt !important;
    color: #0f172a !important;
    border-bottom: 2px solid #cbd5e1;
    padding-bottom: 8px;
    margin-bottom: 16px;
  }

  /* ---- Links: show URL for external links ---- */

  a[href^="http"]::after {
    content: " (" attr(href) ")";
    font-size: 8pt;
    color: #64748b;
    word-break: break-all;
  }

  /* Don't show URL for internal nav links */
  nav a::after,
  a[href^="/"]::after,
  a[href^="#"]::after {
    content: none !important;
  }

  /* ---- Quiz sections: hide interactive quiz (needs JS) ---- */

  /* Keep the learning objectives visible, hide interactive quiz card */
  .quiz-progress-bar,
  .quiz-submit-btn {
    display: none !important;
  }

  /* ---- Chapter navigation (prev/next, bottom of page) ---- */

  /* Hide the chapter footer navigation section and celebration overlay */
  .no-print,
  .celebration-overlay {
    display: none !important;
  }

  /* ---- Diagrams: hide interactive diagrams (don't render in print) ---- */

  .react-flow,
  .react-flow__renderer,
  .react-flow__viewport,
  [class*="react-flow"],
  .diagram-fullscreen {
    display: none !important;
  }

  /* Hide the sticky diagram column (right sidebar) */
  .lg\:col-span-5 {
    display: none !important;
  }

  /* Make left content column full width */
  .lg\:col-span-7 {
    grid-column: 1 / -1 !important;
    width: 100% !important;
  }

  /* ---- Utility classes ---- */

  .no-print {
    display: none !important;
  }

  .print-only {
    display: block !important;
  }

  /* ---- Misc print cleanup ---- */

  /* Remove all border-radius extremes */
  .rounded-full {
    border-radius: 4px !important;
  }

  /* Ensure images don't overflow */
  img {
    max-width: 100% !important;
    height: auto !important;
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Remove overflow hidden that clips content */
  .overflow-hidden,
  .overflow-x-auto,
  .overflow-y-auto {
    overflow: visible !important;
  }

  /* Scrollbar not needed */
  ::-webkit-scrollbar {
    display: none !important;
  }

  * {
    scrollbar-width: none !important;
  }
}
